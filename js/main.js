(()=>{var x=Object.create;var $=Object.defineProperty;var B=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var _=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty;var A=t=>$(t,"__esModule",{value:!0});var D=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var C=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of R(e))!q.call(t,s)&&(o||s!=="default")&&$(t,s,{get:()=>e[s],enumerable:!(n=B(e,s))||n.enumerable});return t},p=(t,e)=>C(A($(t!=null?x(_(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var f=D((Y,g)=>{var k={isValid:"bg-success",isSemiValid:"bg-warning",isInvalid:"is-invalid",letterInput:"letter-input",word:"word",wordDisabled:"word--disabled"};g.exports.CLASSES=k});var w=p(f());var d=p(f()),a={letterInput:`.${d.CLASSES.letterInput}`,letterInputInvalid:`.${d.CLASSES.letterInput}.${d.CLASSES.isInvalid}`,rows:"#rows",word:`.${d.CLASSES.word}`,wordDisabled:`.${d.CLASSES.wordDisabled}`};var h=p(f());function T(t){let{name:e,value:o,disabled:n}=t,s=`${h.CLASSES.letterInput} form-control form-control-lg text-center text-uppercase`;return`<input ${n?"disabled":""} class="${s}" type="text" maxlength="1" name="${e}" aria-label="${e}" ${o?`value=${o}`:""} required="required">`}function V(t){let e="";return t.forEach(o=>{let{name:n,value:s,disabled:r}=o;e+=`<div class="letter-wrapper">${T({name:n,value:s,disabled:r})}</div>`}),e}function I(t){let{initialValue:e}=t,o="";for(let n=0;n<6;n+=1){let s=[],r=!0;e[n]?.disabled===!1&&(r=!1);for(let l=0;l<5;l+=1){let c="";e[n]?.letters[l]&&(c=e[n].letters[l].letter),s.push({name:`${n}-${l}`,value:c,disabled:r})}o+=`<div data-row="${n}" class="word d-flex justify-content-center ${r?"word--disabled":""}">${V(s)}</div>`}return o}var m=p(f());function L(t){let e=document.querySelector(`${a.rows} ${a.word}[data-row="${t}"]`);e.classList.remove(m.CLASSES.wordDisabled),e.querySelectorAll(a.letterInput).forEach((n,s)=>{n.disabled=!1,s===0&&n.focus()})}function S(t){t.querySelectorAll(a.letterInput).forEach(o=>{o.disabled=!0}),t.classList.add(m.CLASSES.wordDisabled)}function v(t,e){let o=[];return e.split("").forEach((n,s)=>{let r=-1;t.indexOf(n.toLowerCase())>-1&&(t[s]===n?r=2:r=1),o.push({letter:n,status:r})}),o}function E(t){t.forEach((e,o)=>{e.forEach((n,s)=>{let{status:r}=n,l=document.querySelector(`${a.letterInput}[name="${o}-${s}"]`);r===1&&l.classList.add(m.CLASSES.isSemiValid),r===2&&l.classList.add(m.CLASSES.isValid)})})}var i={},y=[{letters:[{letter:"",status:0},{letter:"",status:0},{letter:"",status:0},{letter:"",status:0},{letter:"",status:0}],disabled:!1}];function N(){let t="english",e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).lang==="ca"&&(t="catala"),t}var u={database:[],language:N(),data:y};function M(){i.rows=document.getElementById("rows"),i.form=document.querySelector("form"),i.submitButton=document.getElementById("submit"),i.reloadButton=document.getElementById("reload"),i.solution=document.getElementById("solution")}function P(){let t=document.getElementById("fireworks_wrapper");t.querySelector(".fireworks").classList.add("pyro"),setTimeout(()=>{t.querySelector(".fireworks").classList.remove("pyro")},1e4)}function U(t){let e=t.findIndex(o=>o.status<2)===-1;if(e){let o=document.querySelector(`${a.rows} ${a.word}:not(${a.wordDisabled})`);i.submitButton.hidden=!0,i.reloadButton.hidden=!1,S(o),P()}return e}function W(){i.solution.innerText=u.solution.join(""),i.solution.hidden=!1,i.submitButton.hidden=!0,i.reloadButton.hidden=!1}function z(t){t.preventDefault();let e="",o=document.querySelector(`${a.rows} ${a.word}:not(${a.wordDisabled})`);if(o.querySelectorAll(a.letterInputInvalid).length>0)return;o.querySelectorAll(a.letterInput).forEach(b=>{e+=b.value}),S(o);let r=+o.dataset.row+1;r<6&&L(r);let l=v(u.solution,e);u.data[+o.dataset.row]=l,E(u.data),!U(l)&&r===6&&W()}function H(t){let{target:e}=t,{value:o,name:n}=e;if(o!==""&&e.classList.contains(w.CLASSES.letterInput)){let s=/[a-zA-Z]/g,r=o.match(s),l=+n.split("-")[1];if(l<4){let c=`${n.split("-")[0]}-${l+1}`;document.querySelector(`${a.letterInput}[name="${c}"]`).focus()}else l===4&&i.submitButton.focus();r?e.classList.remove(w.CLASSES.isInvalid):e.classList.add(w.CLASSES.isInvalid)}}function K(){window.location.reload()}function Z(){let t=Math.floor(Math.random()*(u.database.length+1)),e=u.database[t].split("");return console.log(e),e}function F(){i.form.addEventListener("submit",z),document.addEventListener("keyup",H),i.reloadButton.addEventListener("click",K)}function G(){F(),u.solution=Z(),u.data=y,i.rows.innerHTML=I({initialValue:u.data})}function J(){let t=document.getElementById(`button-${u.language}`);t.classList.add("btn-outline-success"),t.classList.remove("btn-outline-secondary")}function Q(){M(),J(),fetch(`./database/${u.language}.json?${new Date().getTime()}`).then(t=>t.json()).then(t=>{u.database=t.words,G()})}Q();})();
