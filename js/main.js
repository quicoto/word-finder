(()=>{var W=Object.create;var S=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var A=t=>S(t,"__esModule",{value:!0});var h=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var T=(t,e,a,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of M(e))!C.call(t,l)&&(a||l!=="default")&&S(t,l,{get:()=>e[l],enumerable:!(n=q(e,l))||n.enumerable});return t},m=(t,e)=>T(A(S(t!=null?W(j(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var f=h((lt,y)=>{var N={isValid:"bg-success",isSemiValid:"bg-warning",isInvalid:"is-invalid",letterInput:"letter-input",word:"word",wordDisabled:"word--disabled"};y.exports.CLASSES=N});var B=h((it,x)=>{x.exports.calculate=(t,e)=>{let a=[];return e.split("").forEach((n,l)=>{let i=n.toLowerCase(),r=-1;t.indexOf(i)>-1&&(t[l]===i?r=2:r=1),a.push({letter:n,status:r})}),a}});var g=m(f());var c=m(f()),d={letterInput:`.${c.CLASSES.letterInput}`,letterInputInvalid:`.${c.CLASSES.letterInput}.${c.CLASSES.isInvalid}`,rows:"#rows",word:`.${c.CLASSES.word}`,wordDisabled:`.${c.CLASSES.wordDisabled}`};var L=m(f());function O(t){let{name:e,value:a,disabled:n}=t,l=`${L.CLASSES.letterInput} form-control form-control-lg text-center text-uppercase`;return`<input ${n?"disabled":""} class="${l}" type="text" maxlength="1" name="${e}" aria-label="${e}" ${a?`value=${a}`:""} required="required">`}function V(t){let e="";return t.forEach(a=>{let{name:n,value:l,disabled:i}=a;e+=`<div class="letter-wrapper">${O({name:n,value:l,disabled:i})}</div>`}),e}function I(t){let{initialValue:e}=t,a="";for(let n=0;n<6;n+=1){let l=[],i=!0;e[n]?.disabled===!1&&(i=!1);for(let r=0;r<5;r+=1){let u="";e[n]?.letters[r]&&(u=e[n].letters[r].letter),l.push({name:`${n}-${r}`,value:u,disabled:i})}a+=`<div data-row="${n}" class="word d-flex justify-content-center ${i?"word--disabled":""}">${V(l)}</div>`}return a}var p=m(f());function E(t){let e=document.querySelector(`${d.rows} ${d.word}[data-row="${t}"]`);e.classList.remove(p.CLASSES.wordDisabled),e.querySelectorAll(d.letterInput).forEach((n,l)=>{n.disabled=!1,l===0&&n.focus()})}function $(t){if(!t)return;t.querySelectorAll(d.letterInput).forEach(a=>{a.disabled=!0}),t.classList.add(p.CLASSES.wordDisabled)}function v(t){t.forEach((e,a)=>{e.forEach((n,l)=>{let{status:i}=n,r=document.querySelector(`${d.letterInput}[name="${a}-${l}"]`);i===1&&r.classList.add(p.CLASSES.isSemiValid),i===2&&r.classList.add(p.CLASSES.isValid)})})}var R=m(B()),s={},D=[{letters:[{letter:"",status:0},{letter:"",status:0},{letter:"",status:0},{letter:"",status:0},{letter:"",status:0}],disabled:!1}];function P(){let t="catala",e=new URLSearchParams(window.location.search),a=Object.fromEntries(e.entries());return a.lang==="ca"&&(t="catala"),a.lang==="en"&&(t="english"),t}var o={projectKey:"word-finder",database:[],language:P(),data:D,sortedData:{english:[],catala:[]}};function H(){s.rows=document.getElementById("rows"),s.form=document.querySelector("form"),s.submitButton=document.getElementById("submit"),s.reloadButton=document.getElementById("reload"),s.solution=document.getElementById("solution"),s.playedWords=document.getElementById("played-words"),s.wordCount=document.getElementById("word-count"),s.modalBackdrop=document.getElementById("modal-backdrop"),s.noRealWordModal=document.getElementById("noRealWordModal"),s.closeModal=document.getElementById("close-modal")}function U(){let t=document.getElementById("fireworks_wrapper");t.querySelector(".fireworks").classList.add("pyro"),setTimeout(()=>{t.querySelector(".fireworks").classList.remove("pyro")},1e4)}function z(){document.body.classList.add("modal-open"),s.modalBackdrop.classList.add("show"),s.modalBackdrop.style.display="block",s.noRealWordModal.classList.add("show"),s.noRealWordModal.style.display="block"}function Z(){document.body.classList.remove("modal-open"),s.modalBackdrop.classList.remove("show"),s.modalBackdrop.style.display="none",s.noRealWordModal.classList.add("show"),s.noRealWordModal.style.display="none"}function b(){let t=localStorage.getItem(o.projectKey);t?(o.sortedData=JSON.parse(t),o.sortedData.english=o.sortedData.english.sort(),o.sortedData.catala=o.sortedData.catala.sort(),s.playedWords.innerText=o.sortedData[o.language].join(", "),s.wordCount.innerText=`(${o.sortedData[o.language].length} / ${o.database.length})`):(localStorage.setItem(o.projectKey,JSON.stringify(o.sortedData)),b())}function F(){o.sortedData[o.language].push(o.solution.join("")),localStorage.setItem(o.projectKey,JSON.stringify(o.sortedData)),b()}function G(t){let e=t.findIndex(a=>a.status<2)===-1;if(e){let a=document.querySelector(`${d.rows} ${d.word}:not(${d.wordDisabled})`);s.submitButton.hidden=!0,s.reloadButton.hidden=!1,$(a),U(),F()}return e}function Q(){s.solution.innerText=o.solution.join(""),s.solution.hidden=!1,s.submitButton.hidden=!0,s.reloadButton.hidden=!1}function X(t){t.preventDefault();let e="",a=document.querySelector(`${d.rows} ${d.word}:not(${d.wordDisabled})`);if(a.querySelectorAll(d.letterInputInvalid).length>0)return;if(a.querySelectorAll(d.letterInput).forEach(w=>{e+=w.value}),o.database.filter(w=>w===e).length===0)return z(),!1;$(a);let r=+a.dataset.row+1;r<6&&E(r);let u=R.calculate(o.solution,e);o.data[+a.dataset.row]=u,v(o.data),!G(u)&&r===6&&Q()}function Y(t){let{target:e}=t,{value:a,name:n}=e;if(a!==""&&e.classList.contains(g.CLASSES.letterInput)){let l=/[a-zA-Z]/g,i=a.match(l),r=+n.split("-")[1];if(r<4){let u=`${n.split("-")[0]}-${r+1}`;document.querySelector(`${d.letterInput}[name="${u}"]`).focus()}else r===4&&s.submitButton.focus();i?e.classList.remove(g.CLASSES.isInvalid):e.classList.add(g.CLASSES.isInvalid)}}function tt(){window.location.reload()}function _(){let t=Math.floor(Math.random()*o.database.length),e=o.database[t].split("");return console.log(e),e}function et(){s.form.addEventListener("submit",X),document.addEventListener("keyup",Y),s.reloadButton.addEventListener("click",tt),s.closeModal.addEventListener("click",Z)}function ot(){if(et(),o.solution=_(),o.sortedData[o.language].length===o.database.length){s.rows.innerHTML="\u{1F389} Congratulations, you have completed all words! \u{1F44F}",s.submitButton.hidden=!0;return}for(;o.sortedData[o.language].indexOf(o.solution.join(""))>-1;)o.solution=_();o.data=D,s.rows.innerHTML=I({initialValue:o.data})}function at(){let t=document.getElementById(`button-${o.language}`);t.classList.add("btn-outline-success"),t.classList.remove("btn-outline-secondary")}function st(){H(),at(),fetch(`./database/${o.language}.json?${new Date().getTime()}`).then(t=>t.json()).then(t=>{o.database=t.words,b(),ot()})}st();})();
