(()=>{var j=Object.create;var g=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty;var k=t=>g(t,"__esModule",{value:!0});var h=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var N=(t,e,n,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of A(e))!O.call(t,a)&&(n||a!=="default")&&g(t,a,{get:()=>e[a],enumerable:!(s=C(e,a))||s.enumerable});return t},f=(t,e)=>N(k(g(t!=null?j(T(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var m=h((nt,I)=>{var V={isValid:"bg-success",isSemiValid:"bg-warning",isInvalid:"is-invalid",letterInput:"letter-input",word:"word",wordDisabled:"word--disabled"};I.exports.CLASSES=V});var D=h((rt,x)=>{x.exports.calculate=(t,e)=>{let n=[];return e.split("").forEach((s,a)=>{let i=s.toLowerCase(),r=-1;t.indexOf(i)>-1&&(t[a]===i?r=2:r=1),n.push({letter:s,status:r})}),n}});var w=f(m());var u=f(m()),d={letterInput:`.${u.CLASSES.letterInput}`,letterInputInvalid:`.${u.CLASSES.letterInput}.${u.CLASSES.isInvalid}`,rows:"#rows",word:`.${u.CLASSES.word}`,wordDisabled:`.${u.CLASSES.wordDisabled}`};var y=f(m());function K(t){let{name:e,value:n,disabled:s}=t,a=`${y.CLASSES.letterInput} form-control form-control-lg text-center text-uppercase`;return`<input ${s?"disabled":""} class="${a}" type="text" maxlength="1" name="${e}" aria-label="${e}" ${n?`value=${n}`:""} required="required">`}function W(t){let e="";return t.forEach(n=>{let{name:s,value:a,disabled:i}=n;e+=`<div class="letter-wrapper">${K({name:s,value:a,disabled:i})}</div>`}),e}function E(t){let{initialValue:e}=t,n="";for(let s=0;s<6;s+=1){let a=[],i=!0;e[s]?.disabled===!1&&(i=!1);for(let r=0;r<5;r+=1){let c="";e[s]?.letters[r]&&(c=e[s].letters[r].letter),a.push({name:`${s}-${r}`,value:c,disabled:i})}n+=`<div data-row="${s}" class="word d-flex justify-content-center ${i?"word--disabled":""}">${W(a)}</div>`}return n}var p=f(m());function L(t){let e=document.querySelector(`${d.rows} ${d.word}[data-row="${t}"]`);e.classList.remove(p.CLASSES.wordDisabled),e.querySelectorAll(d.letterInput).forEach((s,a)=>{s.disabled=!1,a===0&&s.focus()})}function S(t){t.querySelectorAll(d.letterInput).forEach(n=>{n.disabled=!0}),t.classList.add(p.CLASSES.wordDisabled)}function v(t){t.forEach((e,n)=>{e.forEach((s,a)=>{let{status:i}=s,r=document.querySelector(`${d.letterInput}[name="${n}-${a}"]`);i===1&&r.classList.add(p.CLASSES.isSemiValid),i===2&&r.classList.add(p.CLASSES.isValid)})})}var B=f(D()),l={},_=[{letters:[{letter:"",status:0},{letter:"",status:0},{letter:"",status:0},{letter:"",status:0},{letter:"",status:0}],disabled:!1}];function P(){let t="english",e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).lang==="ca"&&(t="catala"),t}var o={projectKey:"word-finder",database:[],language:P(),data:_,sortedData:{english:[],catala:[]}};function U(){l.rows=document.getElementById("rows"),l.form=document.querySelector("form"),l.submitButton=document.getElementById("submit"),l.reloadButton=document.getElementById("reload"),l.solution=document.getElementById("solution"),l.playedWords=document.getElementById("played-words"),l.wordCount=document.getElementById("word-count")}function z(){let t=document.getElementById("fireworks_wrapper");t.querySelector(".fireworks").classList.add("pyro"),setTimeout(()=>{t.querySelector(".fireworks").classList.remove("pyro")},1e4)}function $(){let t=localStorage.getItem(o.projectKey);t?(o.sortedData=JSON.parse(t),o.sortedData.english=o.sortedData.english.sort(),o.sortedData.catala=o.sortedData.catala.sort(),l.playedWords.innerText=o.sortedData[o.language].join(", "),l.wordCount.innerText=`(${o.sortedData[o.language].length} / ${o.database.length})`):(localStorage.setItem(o.projectKey,JSON.stringify(o.sortedData)),$())}function R(){o.sortedData[o.language].push(o.solution.join("")),localStorage.setItem(o.projectKey,JSON.stringify(o.sortedData)),$()}function H(t){let e=t.findIndex(n=>n.status<2)===-1;if(e){let n=document.querySelector(`${d.rows} ${d.word}:not(${d.wordDisabled})`);l.submitButton.hidden=!0,l.reloadButton.hidden=!1,S(n),z(),R()}return e}function Z(){l.solution.innerText=o.solution.join(""),l.solution.hidden=!1,l.submitButton.hidden=!0,l.reloadButton.hidden=!1}function F(t){t.preventDefault();let e="",n=document.querySelector(`${d.rows} ${d.word}:not(${d.wordDisabled})`);if(n.querySelectorAll(d.letterInputInvalid).length>0)return;n.querySelectorAll(d.letterInput).forEach(b=>{e+=b.value}),S(n);let i=+n.dataset.row+1;i<6&&L(i);let r=B.calculate(o.solution,e);o.data[+n.dataset.row]=r,v(o.data),!H(r)&&i===6&&(Z(),R())}function G(t){let{target:e}=t,{value:n,name:s}=e;if(n!==""&&e.classList.contains(w.CLASSES.letterInput)){let a=/[a-zA-Z]/g,i=n.match(a),r=+s.split("-")[1];if(r<4){let c=`${s.split("-")[0]}-${r+1}`;document.querySelector(`${d.letterInput}[name="${c}"]`).focus()}else r===4&&l.submitButton.focus();i?e.classList.remove(w.CLASSES.isInvalid):e.classList.add(w.CLASSES.isInvalid)}}function Q(){window.location.reload()}function q(){let t=Math.floor(Math.random()*(o.database.length+1)),e=o.database[t].split("");return console.log(e),e}function X(){l.form.addEventListener("submit",F),document.addEventListener("keyup",G),l.reloadButton.addEventListener("click",Q)}function Y(){for(X(),o.solution=q();o.sortedData[o.language].indexOf(o.solution.join(""))>-1;)o.solution=q();o.data=_,l.rows.innerHTML=E({initialValue:o.data})}function tt(){let t=document.getElementById(`button-${o.language}`);t.classList.add("btn-outline-success"),t.classList.remove("btn-outline-secondary")}function et(){U(),tt(),fetch(`./database/${o.language}.json?${new Date().getTime()}`).then(t=>t.json()).then(t=>{o.database=t.words,$(),Y()})}et();})();
